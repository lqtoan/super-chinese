<nz-table [style.margin-top.rem]="'0.5'"
          [nzSize]="'small'"
          [nzSimple]=""
          [nzBordered]="false"
          #virtualTable
          [nzVirtualItemSize]="20"
          [nzVirtualForTrackBy]="trackByIndex"
          [nzFrontPagination]="false"
          [nzShowPagination]="false"
          [nzScroll]="{ x: 'calc(100%)', y: 'calc(75vh - 220px)' }"
          [nzLoading]="isLoading"
          [nzData]="records">
  <thead>
    <tr>
      <ng-container *ngFor="let header of headers; let i = index">
        <th [nzWidth]="headers[i].width"
            [nzAlign]="headers[i].align"
            [nzLeft]="headers[i].position === 'left'"
            [nzRight]="headers[i].position === 'right'"
            [nzFilters]="headers[i].filters"
            [nzFilterFn]="headers[i].filterFn"
            [nzSortOrder]="headers[i].sortOrder"
            [nzSortPriority]="headers[i].sortPriority"
            [nzSortFn]="headers[i].sortFn">
          {{ headers[i].label | translate }}
        </th>
      </ng-container>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngIf="records.length">
      <nz-empty [nzNotFoundContent]="'No data found'"></nz-empty>
    </ng-container>
    <ng-template nz-virtual-scroll
                 let-row
                 let-rowIndex="index">
      <tr>
        <ng-container *ngFor="let header of headers; let cellIndex = index">
          <td [nzAlign]="header.align"
              [nzLeft]="header.position === 'left'"
              [nzRight]="header.position === 'right'">
            <ng-template [ngTemplateOutlet]="cellTemplates[header.cellType || ''] || defaultCell"
                         [ngTemplateOutletContext]="{
                $implicit: header.field && row[header.field],
                cellIndex: cellIndex,
                rowIndex:  rowIndex,
                cellType: header.cellType
              }">
            </ng-template>
            <ng-template #defaultCell
                         let-cellValue>{{ cellValue }}</ng-template>
          </td>
          <!-- <td>
            <span nz-popconfirm
                  [nzPopconfirmTitle]="'CONFIRM_DELETE' | translate"
                  nzOkText="OK"
                  nzCancelText="Cancel"
                  (nzOnConfirm)="onDelete(data._id)"
                  (nzOnCancel)="cancel()"
                  class="delete-button"
                  nz-icon
                  nzType="delete"
                  nzTheme="fill"></span>
          </td> -->
        </ng-container>
      </tr>
    </ng-template>
  </tbody>
</nz-table>